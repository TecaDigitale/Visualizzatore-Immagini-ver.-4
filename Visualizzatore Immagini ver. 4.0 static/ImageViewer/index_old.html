<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>Pagina di Prova</title>

		<link rel="stylesheet" type="text/css" href="./BookReader/style/BookReader.css"/>

		<script type="text/javascript" src="./BookReader/lib/jquery-1.2.6.min.js"></script>
		<script type="text/javascript" src="./BookReader/lib/jquery.easing.1.3.js"></script>
		<script type="text/javascript" src="./BookReader/js/BookReader.js"></script>
		<script type="text/javascript" src="./BookReader/js/dragscrollable.js"></script>
		
	</head>
	<body>
	TEST
		<div id="BookReader" style="left:10px; right:10px; top:10px; bottom:2em;">x</div>
		<script type="text/javascript">
			br = new BookReader();

			br.getPageWidth = function(index) {
			    return 800;
			}

			br.getPageHeight = function(index) {
			    return 1200;
			}
						
			br.getPageURI = function(index, reduce, rotate) {
			    // reduce and rotate are ignored in this simple implementation, but we
			    // could e.g. look at reduce and load images from a different directory
			    // or pass the information to an image server
			    var leafStr = '000';            
			    var imgStr = (index+1).toString();
			    var re = new RegExp("0{"+imgStr.length+"}$");
			    var url = 'http://www.archive.org/download/BookReader/img/page'+leafStr.replace(re, imgStr) + '.jpg';
			    return url;
			}

			// Indica se l'immagine deve essere visualizzata a Destra o Sinistra
			br.getPageSide = function(index) {
			    if (0 == (index & 0x1)) {
			        return 'R';
			    } else {
			        return 'L';
			    }
			}

			// Questa funzione restituisce gli indici a sinistra ea destra per la diffusione visibile all'utente che contiene il dato indice. 
			//I valori di ritorno può essere null se non esiste una pagina di fronte o l'indice non è valido.
			br.getSpreadIndices = function(pindex) {   
			    var spreadIndices = [null, null]; 
			    if ('rl' == this.pageProgression) {
			        // Right to Left
			        if (this.getPageSide(pindex) == 'R') {
			            spreadIndices[1] = pindex;
			            spreadIndices[0] = pindex + 1;
			        } else {
			            // Given index was LHS
			            spreadIndices[0] = pindex;
			            spreadIndices[1] = pindex - 1;
			        }
			    } else {
			        // Left to right
			        if (this.getPageSide(pindex) == 'L') {
			            spreadIndices[0] = pindex;
			            spreadIndices[1] = pindex + 1;
			        } else {
			            // Given index was RHS
			            spreadIndices[1] = pindex;
			            spreadIndices[0] = pindex - 1;
			        }
			    }
			    
			    return spreadIndices;
			}

			br.canRotatePage = function(index)
			{
			}
			br.getPageNum = function(index) {
			    return (index+1);
			}

			br.getPageName = function(index) {
			    return "Ci sono: "+(index+1);
			}

			br.leafNumToIndex = function(index)
			{
				return index;
			}

			// Numero totale di pagine
			br.numLeafs = 150;

			// Titolo del libro e link collegato al libro
			br.bookTitle= 'Open Library BookReader Presentation';
			br.bookUrl  = 'http://openlibrary.org';

			// Percorso dove gtrovare le immagini necessarie per disegnare il visualizzatore
			br.imagesBaseURL = '/ImageViewer/BookReader/images/';

			// Indica che deve essere visualizzato come un libro
			br.mode=2;

			// Viene utilizzato per indicare la pagina da visualizzare
			br.titleLeaf=11;

			// Visualizzazione del visualizzatore
			br.init();

		</script>

<div id="BRfooter">
    <div class="BRlogotype">
        <a href="http://openlibrary.org/" class="BRblack">Open Library</a>
        <a href="http://openlibrary.org/beta" class="BRblack" style="font-size: 0.8em; text-decoration: underline;">beta</a>
    </div>
    <div class="BRnavlinks">
        <a class="BRblack" href="http://openlibrary.org/dev/docs/bookreader">About the Bookreader</a> |
        <a class="BRblack" href="https://bugs.launchpad.net/gnubook/+filebug-advanced">Report Errors</a> |
        <a class="BRblack" href="http://openlibrary.org/about">About Us</a> |
        <a class="BRblack" href="http://openlibrary.org/index/index.html">Index</a> |
        <a class="BRblack" href="http://www.archive.org/">IA</a> |
        <a class="BRblack" href="http://www.opencontentalliance.org/">OCA</a> |
        <a class="BRblack" href="http://wikimediafoundation.org/">WMF</a> |
        <a class="BRblack" href="http://openlibrary.org/about/contact">Contact Us</a>
    </div>
</div>
	</body>
</html>